{"remainingRequest":"E:\\shixun\\SuDo\\zhmen\\sudoblog-backstage\\node_modules\\babel-loader\\lib\\index.js!E:\\shixun\\SuDo\\zhmen\\sudoblog-backstage\\src\\axios.js","dependencies":[{"path":"E:\\shixun\\SuDo\\zhmen\\sudoblog-backstage\\src\\axios.js","mtime":1666190766662},{"path":"E:\\shixun\\SuDo\\zhmen\\sudoblog-backstage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666175143477},{"path":"E:\\shixun\\SuDo\\zhmen\\sudoblog-backstage\\node_modules\\babel-loader\\lib\\index.js","mtime":1666175140061}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBFbGVtZW50IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gIkAvYXBpL2F1dGgiOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA5MCc7IC8vIOWJjee9ruaLpuaIqgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvL+aYr+WQpumcgOimgeiuvue9rnRva2VuCiAgLy8gY29uc3QgaXNUb2tlbiA9IChjb25maWcuaGVhZGVycyB8fCB7fSkuaXNUb2tlbiA9PT0gZmFsc2UKICAvLyBsZXQgdXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlckluZm8iKSkgOiBudWxsCiAgLy8gbGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CiAgLy8gaWYgKHVzZXIhPW51bGwmJiBpc1Rva2VuKXsKICAvLyAgIGNvbmZpZy5oZWFkZXJzWyd0b2tlbiddID0gdG9rZW47CiAgLy8gfQogIHZhciBpc1Rva2VuID0gKGNvbmZpZy5oZWFkZXJzIHx8IHt9KS5pc1Rva2VuID09PSBmYWxzZTsKICBjb25maWcuaGVhZGVycy5jb250ZW50VHlwZSA9ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IjsgLy8gZG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKCiAgaWYgKGdldFRva2VuKCkgJiYgIWlzVG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLnRva2VuID0gZ2V0VG9rZW4oKTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCLor7fmsYLlh7rplJnvvIzplJnor6/kv6Hmga/lpoLkuIvvvJoiKTsKICBjb25zb2xlLmxvZyhlcnJvcik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgY29uc29sZS5sb2coIj09PT09PT09PT09PT09PT09Iik7CiAgY29uc29sZS5sb2cocmVzKTsKICBjb25zb2xlLmxvZygiPT09PT09PT09PT09PT09PT0iKTsKCiAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9IGVsc2UgewogICAgRWxlbWVudC5NZXNzYWdlLmVycm9yKCfplJnkuoblk6bvvIzov5nmmK/kuIDmnaHplJnor6/mtojmga8nLCB7CiAgICAgIGR1cmF0aW9uOiAzICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLm1zZyk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5jb2RlID09PSA0MDEpIHsKICAgIHRoaXMucm91dGVyLnB1c2goIi9sb2dpbiIpOwogIH0KfSk7"},{"version":3,"sources":["E:/shixun/SuDo/zhmen/sudoblog-backstage/src/axios.js"],"names":["axios","Element","getToken","defaults","baseURL","interceptors","request","use","config","isToken","headers","contentType","token","error","console","log","Promise","reject","response","res","data","code","Message","duration","msg","router","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,SAASC,QAAT,QAAyB,YAAzB;AAGAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyB,uBAAzB,C,CAEA;;AACAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACI,UAAAC,MAAM,EAAI;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,OAAO,GAAG,CAACD,MAAM,CAACE,OAAP,IAAkB,EAAnB,EAAuBD,OAAvB,KAAmC,KAAnD;AACAD,EAAAA,MAAM,CAACE,OAAP,CAAeC,WAAf,GAA6B,iCAA7B,CATM,CAUN;;AACA,MAAIT,QAAQ,MAAM,CAACO,OAAnB,EAA4B;AACxBD,IAAAA,MAAM,CAACE,OAAP,CAAeE,KAAf,GAAuBV,QAAQ,EAA/B;AACH;;AACD,SAAOM,MAAP;AACH,CAhBL,EAiBI,UAAAK,KAAK,EAAI;AACLC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH,CArBL;AAwBAb,KAAK,CAACK,YAAN,CAAmBa,QAAnB,CAA4BX,GAA5B,CACI,UAAAW,QAAQ,EAAI;AACR,MAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAnB;AAEAN,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACAL,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;;AAGA,MAAII,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AAClB,WAAOH,QAAP;AACH,GAFD,MAEO;AACHjB,IAAAA,OAAO,CAACqB,OAAR,CAAgBT,KAAhB,CAAsB,cAAtB,EAAsC;AAACU,MAAAA,QAAQ,EAAE,IAAI;AAAf,KAAtC;AACA,WAAOP,OAAO,CAACC,MAAR,CAAeE,GAAG,CAACK,GAAnB,CAAP;AACH;AACJ,CAfL,EAgBI,UAASX,KAAT,EAAgB;AACZ,MAAIA,KAAK,CAACK,QAAN,CAAeE,IAAf,CAAoBC,IAApB,KAA6B,GAAjC,EAAqC;AACjC,SAAKI,MAAL,CAAYC,IAAZ,CAAiB,QAAjB;AACH;AACJ,CApBL","sourcesContent":["import axios from 'axios'\r\nimport Element from 'element-ui'\r\nimport { getToken } from \"@/api/auth\";\r\n\r\n\r\naxios.defaults.baseURL = 'http://localhost:8090'\r\n\r\n// 前置拦截\r\naxios.interceptors.request.use(\r\n    config => {\r\n        //是否需要设置token\r\n        // const isToken = (config.headers || {}).isToken === false\r\n        // let user = localStorage.getItem(\"userInfo\") ? JSON.parse(localStorage.getItem(\"userInfo\")) : null\r\n        // let token = localStorage.getItem(\"token\");\r\n        // if (user!=null&& isToken){\r\n        //   config.headers['token'] = token;\r\n        // }\r\n        const isToken = (config.headers || {}).isToken === false\r\n        config.headers.contentType = \"application/json; charset=utf-8\"\r\n        // do something before request is sent\r\n        if (getToken() && !isToken) {\r\n            config.headers.token = getToken()\r\n        }\r\n        return config;\r\n    },\r\n    error => {\r\n        console.log(\"请求出错，错误信息如下：\");\r\n        console.log(error);\r\n        return Promise.reject(error);\r\n    }\r\n)\r\n\r\naxios.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n\r\n        console.log(\"=================\")\r\n        console.log(res)\r\n        console.log(\"=================\")\r\n\r\n\r\n        if (res.code === 200) {\r\n            return response;\r\n        } else {\r\n            Element.Message.error('错了哦，这是一条错误消息', {duration: 3 * 1000})\r\n            return Promise.reject(res.msg)\r\n        }\r\n    },\r\n    function(error) {\r\n        if (error.response.data.code === 401){\r\n            this.router.push(\"/login\")\r\n        }\r\n    }\r\n)\r\n"]}]}